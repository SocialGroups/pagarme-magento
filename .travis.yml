language: php

php:
  - 5.5

env:
 # - MAGENTO_BRANCH="magento-1.9"
  - PAGARME_BRANCH="travis-ci"

before_install:
  - npm install -g grunt-cli
  - git clone git://github.com/n1k0/casperjs.git ~/casperjs
  - cd ~/casperjs
  - git checkout tags/1.0.2
  - export PATH=$PATH:`pwd`/bin
  - cd -
  - git clone https://github.com/tburry/travis-nginx-test.git travis

before_script:
  - phantomjs --version
  - casperjs --version

install:
  - travis/install-nginx.sh
#  - git clone -b $PAGARME_BRANCH https://github.com/SocialGroups/pagarme-magento.git
#  - ls
#  - git clone git://github.com/EcomDev/EcomDev_PHPUnit.git -b dev ./phpunit/
#  - CURR_DIR=$(pwd)
#  - wget https://raw.githubusercontent.com/colinmollenhour/modman/master/modman -O ./mageci/bin/modman
#  - chmod +x ./mageci/bin/modman
#  - ./mageci/bin/mage-ci install-module magento $CURR_DIR/phpunit
#  - ./mageci/bin/mage-ci install-module magento $CURR_DIR
#  - composer install --dev
#  - cd magento

#script:
#  - ../vendor/bin/phpunit --group Sitewards_B2BProfessional

script:
  - phantomjs testrunner.js
  - curl -vsf 'http://localhost:8080/hello.php' &> /dev/stdout
  - cat /tmp/error.log

